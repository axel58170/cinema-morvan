<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' https://image.tmdb.org data:; frame-src https://www.youtube.com;"
    />
    <title>Programme cinéma</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alegreya+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css?v=20251222a" />
  </head>
  <body>
    <div class="page">
      <div class="beta-banner" role="status">
        Version bêta — des erreurs peuvent subsister dans les données.
      </div>
      <header class="hero">
        <div class="hero__content">
          <p class="eyebrow">Programme</p>
          <h1>Programme cinéma</h1>
          <p class="subhead">
            Explorez les séances du Morvan par cinéma, par date ou par film. Recherchez, filtrez et partagez
            en un clin d’œil.
          </p>
        </div>
      </header>

      <section class="controls-panel" aria-live="polite">
        <div class="controls-topbar">
          <div class="segment" role="tablist" aria-label="Modes d’affichage">
            <button class="segment__btn" role="tab" aria-selected="true" data-mode="film">
              Par film
            </button>
            <button class="segment__btn" role="tab" aria-selected="false" data-mode="cinema">
              Par cinéma
            </button>
            <button class="segment__btn" role="tab" aria-selected="false" data-mode="date">
              Par date
            </button>
          </div>
          <button class="filters-toggle" id="openFilters" type="button">
            <span class="filters-toggle__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M3 5h18l-7 8v5l-4 1v-6L3 5z" fill="currentColor" />
              </svg>
            </span>
            <span class="filters-toggle__text">Filtres</span>
            <span class="filters-toggle__badge" id="filtersBadge">0</span>
          </button>

          <div class="filters-sheet" id="filtersSheet" aria-hidden="true">
            <div class="filters-sheet__backdrop" id="filtersBackdrop"></div>
            <div class="filters-sheet__panel" role="dialog" aria-modal="true" aria-labelledby="filtersTitle">
              <div class="filters-sheet__header">
                <h2 id="filtersTitle">Filtres</h2>
              <span class="filters-sheet__hint">Modifications en direct</span>
                <button type="button" class="filters-sheet__close" id="closeFilters" aria-label="Fermer">×</button>
              </div>

              <div class="filters-sheet__body">
                <div class="filters">
                  <label class="field">
                    <span>Film</span>
                    <div class="movie-select">
                    <button type="button" class="movie-select__toggle" id="movieToggleAll">
                      Tout désélectionner
                    </button>
                    <div class="checkbox-group" id="movieFilter"></div>
                  </div>
                </label>

                  <label class="field">
                    <span>Version</span>
                    <div class="dropdown" data-dropdown="version">
                      <button
                        type="button"
                        class="dropdown__button"
                        id="versionDropdownButton"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        Toutes les versions
                      </button>
                      <div class="dropdown__panel" id="versionDropdownPanel">
                        <div class="checkbox-group" id="versionFilter">
                          <label class="checkbox">
                            <input type="checkbox" id="vfFilter" checked />
                            <span>VF</span>
                          </label>
                          <label class="checkbox">
                            <input type="checkbox" id="vostFilter" checked />
                            <span>VOST</span>
                          </label>
                          <label class="checkbox">
                            <input type="checkbox" id="vofFilter" checked />
                            <span>VOF</span>
                          </label>
                        </div>
                      </div>
                    </div>
                  </label>

                  <label class="field" id="cinemaFilterWrap">
                    <span>Cinémas</span>
                    <div class="dropdown" data-dropdown="cinema">
                      <button
                        type="button"
                        class="dropdown__button"
                        id="cinemaDropdownButton"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        Tous les cinémas
                      </button>
                      <div class="dropdown__panel" id="cinemaDropdownPanel">
                        <div class="checkbox-group" id="cinemaFilters"></div>
                      </div>
                    </div>
                  </label>
                </div>
                <div class="filters-sheet__section">
                  <p class="filters-sheet__label">Période</p>
                  <label class="checkbox filters-sheet__toggle">
                    <input type="checkbox" id="showAllDates" />
                    <span>Afficher les dates passées</span>
                  </label>
                </div>
              </div>

            </div>
          </div>
        </div>

        <div class="filter-chips" id="activeFilterChips"></div>
      </section>

      <main>
        <section class="results" id="results"></section>
      </main>

      <footer class="footer">
        <p>
          Aperçus via YouTube et Allociné — liens générés automatiquement (TMDB).
        </p>
        <p>
          Données et cinémas gérés par Sceni Qua Non :
          <a href="http://sceniquanon.com" target="_blank" rel="noopener noreferrer">sceniquanon.com</a>
        </p>
        <p>
          Site réalisé par Axel Graff (axelgraff@gmail.com). Sceni Qua Non n’a pas été impliqué à ce stade.
        </p>
        <p id="lastUpdated"></p>
      </footer>
    </div>

      <script src="data.js?v=20251222a"></script>
      <script src="movies.js?v=20251222a"></script>
      <script src="trailer-utils.js?v=20251222a"></script>
      <script src="app.js?v=20251222a"></script>
  </body>
</html>
